<div data-auto-search-target="list" class='d-flex flex-wrap'>
  <% if contacts.present? %>
    <% contacts.each do |contact| %>
      <div class="card contact-card">
        <div class="btn-group dropup">
          <button type="button" class="dropdown-toggle btn btn-grey-square transparant" data-bs-toggle="dropdown" aria-expanded="false"></button>
          <ul class="dropdown-menu menu-radius">
            <li><%= link_to 'ðŸŽ¨ Edit', edit_contact_path(contact), class: "dropdown-item choice-menu no-underline" %></li>
            <li><%= link_to 'ðŸ’£ Delete', contact_path(contact), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to permanently delete #{contact.first_name} ?" }, class: "dropdown-item choice-menu no-underline" %></li>
          </ul>
        </div>
        <%= link_to contact_path(contact) do %>
          <% if contact.photo.attached? %>
            <%= cl_image_tag contact.photo.key, gravity: :face, height: 450, width: 450, crop: :fill, class: "card-img-top" %>
          <% else %>
            <%= image_tag("photo_not_yet_available.jpg", class: "card-img-top", alt: "contact picture") %>
          <% end %>
          <div class="card-body d-flex justify-content-center">
            <p class="card-text"><%= contact.first_name %> <%= contact.last_name %></p>
          </div>
        <% end %>
      </div>
    <% end %>

  <% else %>
    <h1 class='title mt-3'>No contacts found :(</h1>
  <% end %>
</div>

<%# !EASTEREGG BELOW %>
  <%# Modals %>
    <div class="modal fade" id="editModal" tabindex="+1" aria-labelledby="editModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editModalLabel">This is my CV !</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>And no one can edit my life ðŸ˜‰</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-grey" data-bs-dismiss="modal">Sorry !</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="deleteModal" tabindex="+1" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModalLabel">This is my CV !</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>So please do not delete me ðŸ˜¨</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-grey" data-bs-dismiss="modal">Sorry !</button>
          </div>
        </div>
      </div>
    </div>

  <%# Curriculum card %>
    <div data-auto-search-target="hidden" class='d-none d-flex flex-wrap'>
      <div class="card contact-card">
        <div class="btn-group dropup">
          <button type="button" class="dropdown-toggle btn btn-grey-square transparant" data-bs-toggle="dropdown" aria-expanded="false"></button>
          <ul class="dropdown-menu menu-radius">
            <button type="button" class="dropdown-item choice-menu no-underline" data-bs-toggle="modal" data-bs-target="#editModal">
              ðŸŽ¨ Edit
            </button>
            <button type="button" class="dropdown-item choice-menu no-underline" data-bs-toggle="modal" data-bs-target="#deleteModal">
              ðŸ’£ Delete
            </button>
          </ul>
        </div>
        <%= link_to eastereggs_curriculum_path do %>
            <%= image_tag("CV.jpg", class: "card-img-top", alt: "contact picture") %>
          <div class="card-body d-flex justify-content-center">
            <p class="card-text">Flavien LERAY</p>
          </div>
        <% end %>
      </div>
    </div>
